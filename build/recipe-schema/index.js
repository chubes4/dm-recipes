(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,r=window.wp.components,l=window.wp.element,n=window.wp.i18n,i=({label:t,value:a,onChange:i})=>{const[o,c]=(0,l.useState)(0),[m,s]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(a&&a.startsWith("PT")){const e=a.substring(2),t=e.match(/(\d+)H/),r=e.match(/(\d+)M/);t&&c(parseInt(t[1])),r&&s(parseInt(r[1]))}},[]),(0,l.useEffect)(()=>{let e="PT";o>0&&(e+=o+"H"),m>0&&(e+=m+"M"),"PT"===e&&(e=""),i(e)},[o,m]),(0,e.createElement)("div",{className:"recipe-duration-input"},(0,e.createElement)("label",null,t),(0,e.createElement)("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},(0,e.createElement)(r.__experimentalNumberControl,{label:(0,n.__)("Hours","dm-recipes"),value:o,min:0,onChange:e=>c(parseInt(e)||0)}),(0,e.createElement)(r.__experimentalNumberControl,{label:(0,n.__)("Minutes","dm-recipes"),value:m,min:0,max:59,onChange:e=>s(parseInt(e)||0)})))},o=({label:t,items:a,onChange:l,placeholder:i})=>(0,e.createElement)("div",{className:"recipe-array-input"},(0,e.createElement)("label",null,t),a.map((t,o)=>(0,e.createElement)("div",{key:o,style:{display:"flex",gap:"10px",marginBottom:"10px"}},(0,e.createElement)(r.TextareaControl,{value:t,onChange:e=>{((e,t)=>{const r=[...a];r[e]=t,l(r)})(o,e)},placeholder:i,rows:2}),(0,e.createElement)(r.Button,{isSecondary:!0,isDestructive:!0,onClick:()=>{(e=>{const t=a.filter((t,a)=>a!==e);l(t)})(o)}},(0,n.__)("Remove","dm-recipes")))),(0,e.createElement)(r.Button,{isPrimary:!0,onClick:()=>{l([...a,""])}},(0,n.__)("Add Item","dm-recipes"))),c=({label:t,tags:a,onChange:i})=>{const[o,c]=(0,l.useState)(""),m=()=>{o.trim()&&!a.includes(o.trim())&&(i([...a,o.trim()]),c(""))};return(0,e.createElement)("div",{className:"recipe-tag-input"},(0,e.createElement)("label",null,t),(0,e.createElement)("div",{style:{marginBottom:"10px"}},a.map((t,r)=>(0,e.createElement)("span",{key:r,className:"recipe-tag",style:{display:"inline-block",background:"#e0e0e0",padding:"2px 8px",margin:"2px",borderRadius:"3px"}},t,(0,e.createElement)("button",{onClick:()=>{var e;e=r,i(a.filter((t,a)=>a!==e))},style:{marginLeft:"5px",background:"none",border:"none",cursor:"pointer"}},"×")))),(0,e.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,e.createElement)(r.TextControl,{value:o,onChange:c,onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())},placeholder:(0,n.__)("Enter tag and press Enter","dm-recipes")}),(0,e.createElement)(r.Button,{isSecondary:!0,onClick:m},(0,n.__)("Add","dm-recipes"))))};(0,t.registerBlockType)("dm-recipes/recipe-schema",{title:(0,n.__)("Recipe Schema","dm-recipes"),icon:"food",category:"common",description:(0,n.__)("Complete Schema.org Recipe structured data block","dm-recipes"),edit:({attributes:t,setAttributes:l})=>{const{recipeName:m,description:s,images:p,prepTime:d,cookTime:g,totalTime:u,recipeYield:_,recipeCategory:h,recipeCuisine:E,recipeIngredient:C,recipeInstructions:x,nutrition:v,suitableForDiet:b,keywords:y,cookingMethod:f,video:T,author:k,estimatedCost:B,tool:w,supply:I}=t,S=(0,a.useBlockProps)(),R=[{label:(0,n.__)("Select Cuisine","dm-recipes"),value:""},{label:(0,n.__)("American","dm-recipes"),value:"American"},{label:(0,n.__)("Italian","dm-recipes"),value:"Italian"},{label:(0,n.__)("Mexican","dm-recipes"),value:"Mexican"},{label:(0,n.__)("Chinese","dm-recipes"),value:"Chinese"},{label:(0,n.__)("Indian","dm-recipes"),value:"Indian"},{label:(0,n.__)("French","dm-recipes"),value:"French"},{label:(0,n.__)("Mediterranean","dm-recipes"),value:"Mediterranean"},{label:(0,n.__)("Asian","dm-recipes"),value:"Asian"},{label:(0,n.__)("European","dm-recipes"),value:"European"},{label:(0,n.__)("Other","dm-recipes"),value:"Other"}];return(0,e.createElement)("div",{...S},(0,e.createElement)("div",{style:{background:"#f8f9fa",border:"1px solid #e0e0e0",borderRadius:"4px",padding:"16px",marginBottom:"20px"}},(0,e.createElement)("h3",{style:{margin:"0 0 8px 0",color:"#1e1e1e"}},"🍽️ ",(0,n.__)("Recipe Schema Block","dm-recipes")),(0,e.createElement)("p",{style:{margin:0,color:"#666",fontSize:"14px"}},(0,n.__)("This block generates structured data for search engines. Content is not displayed on the frontend but provides rich recipe information for SEO and search results.","dm-recipes"))),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)("h4",{style:{marginBottom:"12px",color:"#1e1e1e"}},(0,n.__)("Basic Information","dm-recipes")),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Recipe Name","dm-recipes"),value:m,onChange:e=>l({recipeName:e}),style:{marginBottom:"12px"}}),(0,e.createElement)(r.TextareaControl,{label:(0,n.__)("Description","dm-recipes"),value:s,onChange:e=>l({description:e}),rows:4,style:{marginBottom:"12px"}}),(0,e.createElement)("div",{style:{marginBottom:"12px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,n.__)("Recipe Images","dm-recipes")),(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{const t=Array.isArray(e)?e:[e];l({images:t.map(e=>({id:e.id,url:e.url,alt:e.alt||e.title}))})},allowedTypes:["image"],multiple:!0,value:p.map(e=>e.id),render:({open:t})=>(0,e.createElement)(r.Button,{isPrimary:!0,onClick:t},p.length>0?(0,n.__)("Change Images","dm-recipes"):(0,n.__)("Add Images","dm-recipes"))})),p.length>0&&(0,e.createElement)("div",{style:{marginTop:"10px"}},p.map((t,a)=>(0,e.createElement)("img",{key:a,src:t.url,alt:t.alt,style:{width:"80px",height:"80px",objectFit:"cover",margin:"5px",borderRadius:"4px"}}))))),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)("h4",{style:{marginBottom:"12px",color:"#1e1e1e"}},(0,n.__)("Timing","dm-recipes")),(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"}},(0,e.createElement)(i,{label:(0,n.__)("Prep Time","dm-recipes"),value:d,onChange:e=>l({prepTime:e})}),(0,e.createElement)(i,{label:(0,n.__)("Cook Time","dm-recipes"),value:g,onChange:e=>l({cookTime:e})}),(0,e.createElement)(i,{label:(0,n.__)("Total Time","dm-recipes"),value:u,onChange:e=>l({totalTime:e})}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Yield (servings)","dm-recipes"),value:_,onChange:e=>l({recipeYield:e}),placeholder:"e.g., 4 servings"}))),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)("h4",{style:{marginBottom:"12px",color:"#1e1e1e"}},(0,n.__)("Categories & Cuisine","dm-recipes")),(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"}},(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Cuisine","dm-recipes"),value:E,options:R,onChange:e=>l({recipeCuisine:e})}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Cooking Method","dm-recipes"),value:f,onChange:e=>l({cookingMethod:e}),placeholder:"e.g., Baking, Frying"})),(0,e.createElement)("div",{style:{marginTop:"12px"}},(0,e.createElement)(c,{label:(0,n.__)("Recipe Categories","dm-recipes"),tags:h,onChange:e=>l({recipeCategory:e})}))),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)(o,{label:(0,n.__)("Recipe Ingredients","dm-recipes"),items:C,onChange:e=>l({recipeIngredient:e}),placeholder:"e.g., 1 cup flour, 2 eggs, 1/2 cup sugar"})),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)(o,{label:(0,n.__)("Recipe Instructions","dm-recipes"),items:x,onChange:e=>l({recipeInstructions:e}),placeholder:"Enter each step of the recipe"})),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)("h4",{style:{marginBottom:"12px",color:"#1e1e1e"}},(0,n.__)("Nutrition Information (Optional)","dm-recipes")),(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"}},(0,e.createElement)(r.TextControl,{label:(0,n.__)("Calories","dm-recipes"),value:v.calories||"",onChange:e=>l({nutrition:{...v,calories:e}}),placeholder:"250 calories"}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Carbs","dm-recipes"),value:v.carbohydrateContent||"",onChange:e=>l({nutrition:{...v,carbohydrateContent:e}}),placeholder:"30g"}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Protein","dm-recipes"),value:v.proteinContent||"",onChange:e=>l({nutrition:{...v,proteinContent:e}}),placeholder:"15g"}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Fat","dm-recipes"),value:v.fatContent||"",onChange:e=>l({nutrition:{...v,fatContent:e}}),placeholder:"10g"}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Serving Size","dm-recipes"),value:v.servingSize||"",onChange:e=>l({nutrition:{...v,servingSize:e}}),placeholder:"1 cup"}))),(0,e.createElement)("div",{style:{marginBottom:"24px"}},(0,e.createElement)("h4",{style:{marginBottom:"12px",color:"#1e1e1e"}},(0,n.__)("Additional Information (Optional)","dm-recipes")),(0,e.createElement)("div",{style:{marginBottom:"12px"}},(0,e.createElement)(c,{label:(0,n.__)("Keywords/Tags","dm-recipes"),tags:y,onChange:e=>l({keywords:e})})),(0,e.createElement)("div",{style:{marginBottom:"12px"}},(0,e.createElement)(c,{label:(0,n.__)("Suitable for Diet","dm-recipes"),tags:b,onChange:e=>l({suitableForDiet:e})})),(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"}},(0,e.createElement)(r.TextControl,{label:(0,n.__)("Estimated Cost","dm-recipes"),value:B,onChange:e=>l({estimatedCost:e}),placeholder:"$15, £10"})),(0,e.createElement)("div",{style:{marginTop:"12px"}},(0,e.createElement)(o,{label:(0,n.__)("Tools/Equipment","dm-recipes"),items:w,onChange:e=>l({tool:e}),placeholder:"e.g., mixing bowl, whisk, oven"}))))},save:()=>null})})();